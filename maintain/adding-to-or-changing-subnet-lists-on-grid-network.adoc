---
permalink: maintain/adding-to-or-changing-subnet-lists-on-grid-network.html 
sidebar: sidebar 
keywords: storagegrid, subnet list, grid network 
summary: È possibile utilizzare lo strumento Modifica IP per aggiungere o modificare subnet sulla rete Grid. 
---
= Aggiungere o modificare gli elenchi di subnet su Grid Network
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
È possibile utilizzare lo strumento Modifica IP per aggiungere o modificare subnet sulla rete Grid.

.Prima di iniziare
* Tu hai il `Passwords.txt` file.


È possibile aggiungere, eliminare o modificare le subnet nell'elenco delle subnet della rete Grid.  Le modifiche interesseranno il routing su tutti i nodi della griglia.


NOTE: Se si apportano modifiche solo all'elenco delle subnet della rete Grid, utilizzare Grid Manager per aggiungere o modificare la configurazione di rete.  In caso contrario, utilizzare lo strumento Modifica IP se Grid Manager non è accessibile a causa di un problema di configurazione di rete o se si sta eseguendo contemporaneamente una modifica del routing della rete Grid e altre modifiche di rete.

[NOTE]
====
Non utilizzare subnet che contengono i seguenti indirizzi IPv4 per la rete Grid, la rete amministrativa o la rete client di alcun nodo:

* 192.168.130.101
* 192.168.131.101
* 192.168.130.102
* 192.168.131.102
* 198.51.100.2
* 198.51.100.4


Ad esempio, non utilizzare i seguenti intervalli di subnet per la rete Grid, la rete amministrativa o la rete client di alcun nodo:

* 192.168.130.0/24 perché questo intervallo di subnet contiene gli indirizzi IP 192.168.130.101 e 192.168.130.102
* 192.168.131.0/24 perché questo intervallo di subnet contiene gli indirizzi IP 192.168.131.101 e 192.168.131.102
* 198.51.100.0/24 perché questo intervallo di subnet contiene gli indirizzi IP 198.51.100.2 e 198.51.100.4


====
.Passi
. Accedi al nodo di amministrazione principale:
+
.. Immettere il seguente comando: `ssh admin@_primary_Admin_Node_IP_`
.. Inserisci la password elencata nel `Passwords.txt` file.
.. Immettere il seguente comando per passare alla root: `su -`
.. Inserisci la password elencata nel `Passwords.txt` file.


+
Quando si accede come root, il prompt cambia da `$` A `#` .

. Avviare lo strumento Cambia IP immettendo il seguente comando: `change-ip`
. Immettere la passphrase di provisioning al prompt.
+
Viene visualizzato il menu principale.

+
image::../media/change_ip_tool_main_menu.png[screenshot che mostra la schermata di benvenuto dello strumento di modifica IP]

. Nel menu principale, seleziona l'opzione per modificare le subnet per la rete Grid (opzione *4*).
+

NOTE: Le modifiche all'elenco delle subnet della rete Grid riguardano l'intera griglia.

. Scegli una delle seguenti opzioni:
+
--
** Aggiungi una subnet immettendo questo comando: `add CIDR`
** Elimina una subnet immettendo questo comando: `del CIDR`
** Imposta l'elenco delle subnet immettendo questo comando: `set CIDR`


--
+
--

NOTE: Per tutti i comandi è possibile immettere più indirizzi utilizzando questo formato: `add CIDR, CIDR`

Esempio: `add 172.14.0.0/16, 172.15.0.0/16, 172.16.0.0/16`


TIP: È possibile ridurre la quantità di dati digitati utilizzando la "freccia su" per richiamare i valori digitati in precedenza nel prompt di input corrente e quindi modificarli se necessario.

L'esempio di input riportato di seguito mostra l'impostazione delle subnet per l'elenco delle subnet della rete Grid:

image::../media/change_ip_tool_gnsl_sample_input.gif[screenshot descritto dal testo circostante]

--
. Quando sei pronto, digita *q* per tornare alla schermata del menu principale.  Le modifiche verranno mantenute finché non verranno cancellate o applicate.
. Scegli una delle seguenti opzioni:
+
** Selezionare l'opzione *5* per mostrare le modifiche nell'output isolato in modo da mostrare solo l'elemento modificato.  Le modifiche sono evidenziate in verde (aggiunte) o in rosso (eliminazioni), come mostrato nell'esempio di output riportato di seguito:
+
image::../media/change_ip_tool_gnsl_sample_output.gif[screenshot descritto dal testo circostante]

** Selezionare l'opzione *6* per mostrare le modifiche nell'output che mostra la configurazione completa.  Le modifiche sono evidenziate in verde (aggiunte) o in rosso (eliminazioni).
+

NOTE: Alcune interfacce della riga di comando potrebbero visualizzare aggiunte ed eliminazioni utilizzando il formato barrato.



. Selezionare l'opzione *7* per convalidare tutte le modifiche apportate.
+
Questa convalida garantisce che vengano rispettate le regole per le reti Grid, Admin e Client, ad esempio utilizzando subnet sovrapposte.

. Facoltativamente, seleziona l'opzione *8* per salvare tutte le modifiche apportate e tornare in seguito per continuare ad apportare modifiche.
+
Questa opzione consente di uscire dallo strumento Cambia IP e di riavviarlo in un secondo momento, senza perdere le modifiche non applicate.

. Eseguire una delle seguenti operazioni:
+
** Selezionare l'opzione *9* se si desidera annullare tutte le modifiche senza salvare o applicare la nuova configurazione di rete.
** Selezionare l'opzione *10* se si è pronti ad applicare le modifiche e a predisporre la nuova configurazione di rete.  Durante il provisioning, l'output visualizza lo stato man mano che vengono applicati gli aggiornamenti, come mostrato nel seguente output di esempio:
+
[listing]
----
Generating new grid networking description file...

Running provisioning...

Updating grid network configuration on Name
----


. Se hai selezionato l'opzione *10* quando hai apportato modifiche alla rete Grid, seleziona una delle seguenti opzioni:
+
** *applica*: applica immediatamente le modifiche e riavvia automaticamente ciascun nodo, se necessario.
+
Se la nuova configurazione di rete funzionerà contemporaneamente alla vecchia configurazione di rete senza modifiche esterne, è possibile utilizzare l'opzione *applica* per una modifica della configurazione completamente automatizzata.

** *fase*: applica le modifiche al successivo riavvio dei nodi.
+
Se è necessario apportare modifiche alla configurazione di rete fisica o virtuale affinché la nuova configurazione di rete funzioni, è necessario utilizzare l'opzione *stage*, arrestare i nodi interessati, apportare le modifiche necessarie alla rete fisica e riavviare i nodi interessati.

+

NOTE: Se si utilizza l'opzione *stage*, riavviare il nodo il prima possibile dopo lo staging per ridurre al minimo le interruzioni.

** *annulla*: Non apportare modifiche alla rete in questo momento.
+
Se non eri a conoscenza del fatto che le modifiche proposte richiedono il riavvio dei nodi, puoi rinviarle per ridurre al minimo l'impatto sull'utente.  Selezionando *Annulla* si torna al menu principale e le modifiche vengono salvate, così da poterle applicare in seguito.



+
Dopo aver applicato o organizzato le modifiche, viene generato un nuovo pacchetto di ripristino come risultato della modifica alla configurazione della griglia.

. Se la configurazione viene interrotta a causa di errori, sono disponibili le seguenti opzioni:
+
** Per terminare la procedura di modifica dell'IP e tornare al menu principale, digitare *a*.
** Per riprovare l'operazione non riuscita, immettere *r*.
** Per passare all'operazione successiva, immettere *c*.
+
L'operazione non riuscita può essere ripetuta in seguito selezionando l'opzione *10* (Applica modifiche) dal menu principale.  La procedura di modifica dell'IP non sarà completata finché tutte le operazioni non saranno state completate correttamente.

** Se hai dovuto intervenire manualmente (ad esempio per riavviare un nodo) e sei sicuro che l'azione che lo strumento ritiene non riuscita sia stata effettivamente completata correttamente, immetti *f* per contrassegnarla come riuscita e passare all'operazione successiva.


. Scarica un nuovo pacchetto di ripristino da Grid Manager.
+
.. Selezionare *MANUTENZIONE* > *Sistema* > *Pacchetto di ripristino*.
.. Immettere la passphrase di provisioning.


+

CAUTION: Il file del pacchetto di ripristino deve essere protetto perché contiene chiavi di crittografia e password che possono essere utilizzate per ottenere dati dal sistema StorageGRID .


