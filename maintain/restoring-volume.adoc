---
permalink: maintain/restoring-volume.html 
sidebar: sidebar 
keywords: storagegrid, restore, volume 
summary: È possibile ripristinare i dati degli oggetti per un volume di archiviazione o un nodo di archiviazione non riuscito utilizzando Grid Manager.  È inoltre possibile utilizzare Grid Manager per monitorare i processi di ripristino in corso e visualizzare la cronologia dei ripristini. 
---
= Ripristina i dati degli oggetti utilizzando Grid Manager
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
È possibile ripristinare i dati degli oggetti per un volume di archiviazione o un nodo di archiviazione non riuscito utilizzando Grid Manager.  È inoltre possibile utilizzare Grid Manager per monitorare i processi di ripristino in corso e visualizzare la cronologia dei ripristini.

.Prima di iniziare
* Hai completato una di queste procedure per formattare i volumi non riusciti:
+
** link:../maintain/remounting-and-reformatting-appliance-storage-volumes.html["Rimontare e riformattare i volumi di archiviazione dell'appliance (passaggi manuali)"]
** link:../maintain/remounting-and-reformatting-storage-volumes-manual-steps.html["Rimontare e riformattare i volumi di archiviazione (passaggi manuali)"]


* Hai confermato che il nodo di archiviazione in cui stai ripristinando gli oggetti ha uno stato di connessione *Connesso*image:../media/icon_alert_green_checkmark.png["icona avviso segno di spunta verde"] nella scheda *NODI* > *Panoramica* nel Grid Manager.
* Hai confermato quanto segue:
+
** Non è in corso l'espansione della griglia per aggiungere un nodo di archiviazione.
** La dismissione di un nodo di archiviazione non è in corso o non è riuscita.
** Non è in corso il ripristino di un volume di archiviazione non riuscito.
** Non è in corso il ripristino di un nodo di archiviazione con un'unità di sistema guasta.
** Non è in corso alcun processo di ribilanciamento della CE.
** La clonazione del nodo dell'appliance non è in corso.




.Informazioni su questo compito
Dopo aver sostituito le unità ed eseguito i passaggi manuali per formattare i volumi, Grid Manager visualizza i volumi come candidati per il ripristino nella scheda *MANUTENZIONE* > *Ripristino volume* > *Nodi da ripristinare*.

Se possibile, ripristinare i dati degli oggetti utilizzando la pagina Ripristino volume in Grid Manager.  Puoi anche<<enable-auto-restore-mode,abilita la modalità di ripristino automatico>> per avviare automaticamente il ripristino del volume quando i volumi sono pronti per essere ripristinati o<<manually-restore,eseguire manualmente il ripristino del volume>> .  Seguire queste linee guida:

* Se i volumi sono elencati in *MANUTENZIONE* > *Ripristino volume* > *Nodi da ripristinare*, ripristinare i dati dell'oggetto come descritto nei passaggi seguenti. I volumi saranno elencati se:
+
** Alcuni, ma non tutti, i volumi di archiviazione in un nodo sono falliti
** Tutti i volumi di archiviazione in un nodo sono guasti e vengono sostituiti con lo stesso numero di volumi o più volumi


+
La pagina Ripristino volume in Grid Manager consente inoltre di<<view-restoration-progress,monitorare il processo di ripristino del volume>> E<<view-restoration-history,visualizza la cronologia dei restauri>> .

* Se i volumi non sono elencati in Grid Manager come candidati per il ripristino, seguire i passaggi appropriati per l'utilizzo di `repair-data` script per ripristinare i dati dell'oggetto:
+
** link:restoring-object-data-to-storage-volume.html["Ripristino dei dati dell'oggetto nel volume di archiviazione (errore dell'unità di sistema)"]
** link:restoring-object-data-to-storage-volume-where-system-drive-is-intact.html["Ripristina i dati dell'oggetto nel volume di archiviazione in cui l'unità di sistema è intatta"]
** link:restoring-object-data-to-storage-volume-for-appliance.html["Ripristina i dati dell'oggetto nel volume di archiviazione per l'appliance"]
+

NOTE: Lo script repair-data è obsoleto e verrà rimosso in una versione futura.



+
Se il nodo di archiviazione recuperato contiene meno volumi rispetto al nodo che sta sostituendo, è necessario utilizzare `repair-data` sceneggiatura.



È possibile ripristinare due tipi di dati oggetto:

* Gli oggetti dati replicati vengono ripristinati da altre posizioni, presupponendo che le regole ILM della griglia siano state configurate per rendere disponibili le copie degli oggetti.
+
** Se una regola ILM è stata configurata per archiviare solo una copia replicata e tale copia esisteva su un volume di archiviazione che ha generato un errore, non sarà possibile ripristinare l'oggetto.
** Se l'unica copia rimanente di un oggetto si trova in un Cloud Storage Pool, StorageGRID deve inviare più richieste all'endpoint del Cloud Storage Pool per ripristinare i dati dell'oggetto.


* Gli oggetti dati con codice di cancellazione (EC) vengono ripristinati riassemblando i frammenti memorizzati.  I frammenti danneggiati o persi vengono ricreati dall'algoritmo di codifica di cancellazione a partire dai dati rimanenti e dai frammenti di parità.
+
Le riparazioni dei dati codificati in modo da essere cancellati possono iniziare mentre alcuni nodi di archiviazione sono offline.  Tuttavia, se non è possibile recuperare tutti i dati codificati in modo da cancellarli, la riparazione non può essere completata.  La riparazione verrà completata quando tutti i nodi saranno disponibili.




NOTE: Il ripristino del volume dipende dalla disponibilità delle risorse in cui sono archiviate le copie degli oggetti.  Il processo di ripristino del volume non è lineare e potrebbe richiedere giorni o settimane per essere completato.



== [[enable-auto-restore-mode]]Abilita la modalità di ripristino automatico

Quando si abilita la modalità di ripristino automatico, il ripristino del volume si avvia automaticamente quando i volumi sono pronti per essere ripristinati.

.Passi
. In Grid Manager vai su *MANUTENZIONE* > *Ripristino volume*.
. Selezionare la scheda *Nodi da ripristinare*, quindi spostare l'interruttore per *Modalità di ripristino automatico* sulla posizione abilitata.
. Quando viene visualizzata la finestra di dialogo di conferma, rivedere i dettagli.
+
[NOTE]
====
** Non sarà possibile avviare manualmente i processi di ripristino del volume su alcun nodo.
** I ripristini del volume inizieranno automaticamente solo quando non saranno in corso altre procedure di manutenzione.
** È possibile monitorare lo stato del lavoro dalla pagina di monitoraggio dell'avanzamento.
** StorageGRID riprova automaticamente i ripristini dei volumi che non riescono ad avviarsi.


====
. Una volta compresi i risultati dell'attivazione della modalità di ripristino automatico, selezionare *Sì* nella finestra di dialogo di conferma.
+
È possibile disattivare la modalità di ripristino automatico in qualsiasi momento.





== [[manually-restore]]Ripristina manualmente il volume o il nodo non riuscito

Per ripristinare un volume o un nodo non riuscito, seguire questi passaggi.

.Passi
. In Grid Manager vai su *MANUTENZIONE* > *Ripristino volume*.
. Selezionare la scheda *Nodi da ripristinare*, quindi spostare l'interruttore per la *Modalità di ripristino automatico* sulla posizione disattivata.
+
Il numero sulla scheda indica il numero di nodi con volumi che richiedono il ripristino.

. Espandi ciascun nodo per visualizzare i volumi in esso contenuti che necessitano di ripristino e il loro stato.
. Correggere eventuali problemi che impediscono il ripristino di ciascun volume.  I problemi verranno segnalati quando si seleziona *In attesa di passaggi manuali*, se viene visualizzato come stato del volume.
. Selezionare un nodo da ripristinare in cui tutti i volumi indicano lo stato Pronto per il ripristino.
+
È possibile ripristinare i volumi di un solo nodo alla volta.

+
Ogni volume nel nodo deve indicare che è pronto per il ripristino.

. Selezionare *Avvia ripristino*.
. Rispondere a tutti gli avvisi che potrebbero apparire oppure selezionare *Avvia comunque* per ignorare gli avvisi e avviare il ripristino.


Quando il ripristino inizia, i nodi vengono spostati dalla scheda *Nodi da ripristinare* alla scheda *Avanzamento del ripristino*.

Se non è possibile avviare il ripristino di un volume, il nodo torna alla scheda *Nodi da ripristinare*.



== [[view-restoration-progress]]Visualizza l'avanzamento del restauro

La scheda *Avanzamento ripristino* mostra lo stato del processo di ripristino del volume e informazioni sui volumi di un nodo in fase di ripristino.

I tassi di riparazione dei dati per oggetti replicati e con codice di cancellazione in tutti i volumi sono medie che riassumono tutti i restauri in corso, compresi quelli avviati utilizzando `repair-data` sceneggiatura.  Viene indicata anche la percentuale di oggetti intatti presenti in quei volumi che non necessitano di restauro.


NOTE: Il ripristino dei dati replicati dipende dalla disponibilità delle risorse in cui sono archiviate le copie replicate.  Il processo di ripristino dei dati replicati non è lineare e potrebbe richiedere giorni o settimane.

La sezione Lavori di ripristino visualizza informazioni sui ripristini dei volumi avviati da Grid Manager.

* Il numero nell'intestazione della sezione Processi di ripristino indica il numero di volumi in fase di ripristino o in coda per il ripristino.
* Nella tabella vengono visualizzate informazioni su ciascun volume in un nodo in fase di ripristino e sul relativo avanzamento.
+
** L'avanzamento per ciascun nodo mostra la percentuale per ogni processo.
** Espandi la colonna Dettagli per visualizzare l'ora di inizio del ripristino e l'ID del processo.


* Se il ripristino del volume fallisce:
+
** La colonna Stato indica `failed (attempting retry)` e verrà ritentato automaticamente.
** Se più processi di ripristino non sono riusciti, il processo più recente verrà automaticamente ritentato per primo.
** L'avviso *Errore di riparazione EC* viene attivato se i tentativi continuano a fallire.  Per risolvere il problema, seguire i passaggi indicati nell'avviso.






== [[view-restoration-history]]Visualizza la cronologia dei restauri

La scheda *Cronologia restauri* mostra informazioni su tutti i restauri dei volumi completati con successo.


NOTE: Le dimensioni non sono applicabili agli oggetti replicati e vengono visualizzate solo per i restauri che contengono oggetti dati con codice di cancellazione (EC).
