---
permalink: admin/managing-high-availability-groups.html 
sidebar: sidebar 
keywords: manage high availability group, ha groups, admin node, gateway node, active interface, backup interface, priority order 
summary: 'I gruppi ad alta disponibilità \(HA\) forniscono connessioni dati ad alta disponibilità per i client S3 e connessioni ad alta disponibilità per Grid Manager e Tenant Manager.' 
---
= Cosa sono i gruppi ad alta disponibilità (HA)?
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
I gruppi ad alta disponibilità (HA) forniscono connessioni dati ad alta disponibilità per i client S3 e connessioni ad alta disponibilità per Grid Manager e Tenant Manager.

È possibile raggruppare le interfacce di rete di più nodi di amministrazione e gateway in un gruppo ad alta disponibilità (HA).  Se l'interfaccia attiva nel gruppo HA non funziona, un'interfaccia di backup può gestire il carico di lavoro.

Ogni gruppo HA fornisce l'accesso ai servizi condivisi sui nodi selezionati.

* I gruppi HA che includono nodi gateway, nodi amministrativi o entrambi forniscono connessioni dati ad alta disponibilità per i client S3.
* I gruppi HA che includono solo nodi amministrativi forniscono connessioni ad alta disponibilità al Grid Manager e al Tenant Manager.
* Un gruppo HA che include solo appliance di servizi e nodi software basati su VMware può fornire connessioni ad alta disponibilità perlink:../admin/manage-s3-select-for-tenant-accounts.html["Tenant S3 che utilizzano S3 Select"] .  I gruppi HA sono consigliati quando si utilizza S3 Select, ma non sono obbligatori.




== Come si crea un gruppo HA?

. Selezionare un'interfaccia di rete per uno o più nodi amministrativi o nodi gateway.  È possibile utilizzare un'interfaccia Grid Network (eth0), un'interfaccia Client Network (eth2), un'interfaccia VLAN o un'interfaccia di accesso aggiunta al nodo.
+

NOTE: Non è possibile aggiungere un'interfaccia a un gruppo HA se ha un indirizzo IP assegnato tramite DHCP.

. Si specifica un'interfaccia come interfaccia primaria.  L'interfaccia primaria è l'interfaccia attiva, a meno che non si verifichi un errore.
. È possibile determinare l'ordine di priorità per tutte le interfacce di backup.
. Assegna al gruppo da uno a 10 indirizzi IP virtuali (VIP).  Le applicazioni client possono utilizzare uno qualsiasi di questi indirizzi VIP per connettersi a StorageGRID.


Per le istruzioni, vederelink:configure-high-availability-group.html["Configurare gruppi ad alta disponibilità"] .



== Qual è l'interfaccia attiva?

Durante il normale funzionamento, tutti gli indirizzi VIP per il gruppo HA vengono aggiunti all'interfaccia primaria, che è la prima interfaccia in ordine di priorità.  Finché l'interfaccia primaria rimane disponibile, viene utilizzata quando i client si connettono a qualsiasi indirizzo VIP del gruppo.  Ciò significa che durante il normale funzionamento, l'interfaccia primaria è l'interfaccia "attiva" per il gruppo.

Allo stesso modo, durante il normale funzionamento, tutte le interfacce con priorità inferiore per il gruppo HA fungono da interfacce di "backup".  Queste interfacce di backup non vengono utilizzate a meno che l'interfaccia primaria (attualmente attiva) non diventi più disponibile.



== Visualizza lo stato attuale del gruppo HA di un nodo

Per verificare se un nodo è assegnato a un gruppo HA e determinarne lo stato attuale, selezionare *NODI* > *_nodo_*.

Se la scheda *Panoramica* include una voce per *Gruppi HA*, il nodo viene assegnato ai gruppi HA elencati.  Il valore dopo il nome del gruppo è lo stato corrente del nodo nel gruppo HA:

* *Attivo*: il gruppo HA è attualmente ospitato su questo nodo.
* *Backup*: il gruppo HA non sta attualmente utilizzando questo nodo; questa è un'interfaccia di backup.
* *Arrestato*: il gruppo HA non può essere ospitato su questo nodo perché il servizio High Availability (keepalived) è stato arrestato manualmente.
* *Errore*: il gruppo HA non può essere ospitato su questo nodo a causa di uno o più dei seguenti motivi:
+
** Il servizio Load Balancer (nginx-gw) non è in esecuzione sul nodo.
** L'interfaccia eth0 o VIP del nodo è inattiva.
** Il nodo è inattivo.




In questo esempio, il nodo di amministrazione primario è stato aggiunto a due gruppi HA.  Questo nodo è attualmente l'interfaccia attiva per il gruppo di client Admin e un'interfaccia di backup per il gruppo di client FabricPool .

image::../media/ha_group_primary_interface.png[Interfaccia primaria del gruppo HA]



== Cosa succede quando l'interfaccia attiva fallisce?

L'interfaccia che attualmente ospita gli indirizzi VIP è l'interfaccia attiva.  Se il gruppo HA include più di un'interfaccia e l'interfaccia attiva non funziona, gli indirizzi VIP vengono spostati sulla prima interfaccia di backup disponibile in ordine di priorità.  Se tale interfaccia non funziona, gli indirizzi VIP vengono spostati alla successiva interfaccia di backup disponibile e così via.

Il failover può essere attivato per uno qualsiasi di questi motivi:

* Il nodo su cui è configurata l'interfaccia si interrompe.
* Il nodo su cui è configurata l'interfaccia perde la connettività con tutti gli altri nodi per almeno 2 minuti.
* L'interfaccia attiva si disattiva.
* Il servizio Load Balancer si arresta.
* Il servizio di alta disponibilità si arresta.



NOTE: Il failover potrebbe non essere attivato da guasti di rete esterni al nodo che ospita l'interfaccia attiva.  Allo stesso modo, il failover non viene attivato dai servizi per Grid Manager o Tenant Manager.

Il processo di failover richiede in genere solo pochi secondi ed è sufficientemente veloce da non avere un impatto significativo sulle applicazioni client e da consentire loro di continuare a funzionare con i normali comportamenti di ripetizione.

Quando l'errore viene risolto e un'interfaccia con priorità più alta diventa nuovamente disponibile, gli indirizzi VIP vengono automaticamente spostati sull'interfaccia con priorità più alta disponibile.
