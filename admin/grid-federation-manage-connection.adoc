---
permalink: admin/grid-federation-manage-connection.html 
sidebar: sidebar 
keywords: grid federation, edit connection, remove connection, rotate certificates 
summary: La gestione delle connessioni di federazione della griglia tra i sistemi StorageGRID include la modifica dei dettagli della connessione, la rotazione dei certificati, la rimozione delle autorizzazioni dei tenant e la rimozione delle connessioni non utilizzate. 
---
= Gestire le connessioni della federazione di rete
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
La gestione delle connessioni di federazione della griglia tra i sistemi StorageGRID include la modifica dei dettagli della connessione, la rotazione dei certificati, la rimozione delle autorizzazioni dei tenant e la rimozione delle connessioni non utilizzate.

.Prima di iniziare
* Hai effettuato l'accesso a Grid Manager su entrambe le griglie utilizzando unlink:../admin/web-browser-requirements.html["browser web supportato"] .
* Tu hai illink:admin-group-permissions.html["Permesso di accesso root"] per la griglia a cui hai effettuato l'accesso.




== [[edit_grid_fed_connection]]Modifica una connessione di federazione di griglia

È possibile modificare una connessione di federazione di griglia accedendo al nodo di amministrazione principale su una delle griglie nella connessione.  Dopo aver apportato modifiche alla prima griglia, è necessario scaricare un nuovo file di verifica e caricarlo sull'altra griglia.


NOTE: Durante la modifica della connessione, le richieste di clonazione dell'account o di replica tra griglie continueranno a utilizzare le impostazioni di connessione esistenti.  Tutte le modifiche apportate alla prima griglia vengono salvate localmente, ma non vengono utilizzate finché non vengono caricate sulla seconda griglia, salvate e testate.



=== Inizia a modificare la connessione

.Passi
. Sign in a Grid Manager dal nodo di amministrazione principale su una delle due griglie.
. Seleziona *NODI* e verifica che tutti gli altri nodi amministrativi nel tuo sistema siano online.
+

NOTE: Quando si modifica una connessione di federazione della griglia, StorageGRID tenta di salvare un file di "configurazione candidata" su tutti i nodi amministrativi della prima griglia.  Se questo file non può essere salvato su tutti i nodi di amministrazione, verrà visualizzato un messaggio di avviso quando si seleziona *Salva e verifica*.

. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Modifica i dettagli della connessione utilizzando il menu *Azioni* nella pagina Federazione Grid o nella pagina dei dettagli per una connessione specifica.  Vederelink:grid-federation-create-connection.html["Creare connessioni di federazione di griglia"] per cosa inserire.
+
[role="tabbed-block"]
====
.Menu Azioni
--
.. Selezionare il pulsante di opzione per la connessione.
.. Selezionare *Azioni* > *Modifica*.
.. Inserisci le nuove informazioni.


--
.Pagina dei dettagli
--
.. Selezionare il nome di una connessione per visualizzarne i dettagli.
.. Selezionare *Modifica*.
.. Inserisci le nuove informazioni.


--
====
. Inserisci la passphrase di provisioning per la griglia a cui hai effettuato l'accesso.
. Seleziona *Salva e continua*.
+
I nuovi valori vengono salvati, ma non verranno applicati alla connessione finché non avrai caricato il nuovo file di verifica sull'altra griglia.

. Seleziona *Scarica file di verifica*.
+
Per scaricare questo file in un secondo momento, vai alla pagina dei dettagli della connessione.

. Individua il file scaricato(`_connection-name_.grid-federation` ) e salvarlo in un luogo sicuro.
+

CAUTION: Il file di verifica contiene segreti e deve essere conservato e trasmesso in modo sicuro.

. Selezionare *Chiudi* per tornare alla pagina Federazione Grid.
. Verificare che lo *Stato della connessione* sia *In attesa di modifica*.
+

NOTE: Se lo stato della connessione era diverso da *Connesso* quando hai iniziato a modificare la connessione, non cambierà in *In attesa di modifica*.

. Fornire il `_connection-name_.grid-federation` file all'amministratore della griglia per l'altra griglia.




=== Completa la modifica della connessione

Completa la modifica della connessione caricando il file di verifica sull'altra griglia.

.Passi
. Sign in a Grid Manager dal nodo di amministrazione principale.
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Seleziona *Carica file di verifica* per accedere alla pagina di caricamento.
. Seleziona *Carica file di verifica*.  Quindi, cerca e seleziona il file scaricato dalla prima griglia.
. Inserisci la passphrase di provisioning per la griglia a cui hai effettuato l'accesso.
. Seleziona *Salva e prova*.
+
Se la connessione può essere stabilita utilizzando i valori modificati, viene visualizzato un messaggio di successo.  In caso contrario, verrà visualizzato un messaggio di errore.  Rivedi il messaggio e risolvi eventuali problemi.

. Chiudere la procedura guidata per tornare alla pagina Federazione Grid.
. Verificare che lo *Stato della connessione* sia *Connesso*.
. Vai alla pagina della federazione Grid sulla prima griglia e aggiorna il browser.  Verificare che lo *Stato della connessione* sia ora *Connesso*.
. Dopo aver stabilito la connessione, eliminare in modo sicuro tutte le copie del file di verifica.




== [[test_grid_fed_connection]]Testa una connessione di federazione di griglia

.Passi
. Sign in a Grid Manager dal nodo di amministrazione principale.
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Verificare la connessione utilizzando il menu *Azioni* nella pagina Federazione Grid o nella pagina dei dettagli per una connessione specifica.
+
[role="tabbed-block"]
====
.Menu Azioni
--
.. Selezionare il pulsante di opzione per la connessione.
.. Selezionare *Azioni* > *Test*.


--
.Pagina dei dettagli
--
.. Selezionare il nome di una connessione per visualizzarne i dettagli.
.. Selezionare *Test connessione*.


--
====
. Controlla lo stato della connessione:
+
[cols="1a,2a"]
|===
| Stato della connessione | Descrizione 


 a| 
Collegato
 a| 
Entrambe le reti sono collegate e comunicano normalmente.



 a| 
Errore
 a| 
La connessione è in stato di errore.  Ad esempio, un certificato è scaduto o un valore di configurazione non è più valido.



 a| 
Modifica in sospeso
 a| 
Hai modificato la connessione su questa griglia, ma la connessione utilizza ancora la configurazione esistente.  Per completare la modifica, carica il nuovo file di verifica nell'altra griglia.



 a| 
In attesa di connessione
 a| 
Hai configurato la connessione su questa griglia, ma la connessione non è stata completata sull'altra griglia.  Scarica il file di verifica da questa griglia e caricalo sull'altra griglia.



 a| 
Sconosciuto
 a| 
La connessione è in uno stato sconosciuto, probabilmente a causa di un problema di rete o di un nodo offline.

|===
. Se lo stato della connessione è *Errore*, risolvere eventuali problemi.  Quindi, seleziona nuovamente *Test connessione* per confermare che il problema è stato risolto.




== [[rotate_grid_fed_certificates]]Ruota i certificati di connessione

Ogni connessione di federazione di griglia utilizza quattro certificati SSL generati automaticamente per proteggere la connessione.  Quando i due certificati per ciascuna griglia si avvicinano alla data di scadenza, l'avviso *Scadenza del certificato di federazione della griglia* ricorda di ruotare i certificati.


CAUTION: Se i certificati su una delle estremità della connessione scadono, la connessione smetterà di funzionare e le repliche saranno in sospeso finché i certificati non verranno aggiornati.

.Passi
. Sign in a Grid Manager dal nodo di amministrazione principale su una delle due griglie.
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Da una delle due schede della pagina Federazione Grid, seleziona il nome della connessione per visualizzarne i dettagli.
. Selezionare la scheda *Certificati*.
. Seleziona *Ruota certificati*.
. Specificare per quanti giorni i nuovi certificati devono essere validi.
. Inserisci la passphrase di provisioning per la griglia a cui hai effettuato l'accesso.
. Seleziona *Ruota certificati*.
. Se necessario, ripetere questi passaggi sull'altra griglia nella connessione.
+
In generale, utilizzare lo stesso numero di giorni per i certificati su entrambi i lati della connessione.





== [[remove_grid_fed_connection]]Rimuovere una connessione di federazione di griglia

È possibile rimuovere una connessione di federazione di griglia da entrambe le griglie nella connessione.  Come mostrato nella figura, è necessario eseguire i passaggi preliminari su entrambe le griglie per confermare che la connessione non sia utilizzata da alcun tenant su nessuna delle due griglie.

image::../media/grid-federation-remove-connection.png[passaggi per rimuovere la connessione della federazione di rete]

Prima di rimuovere una connessione, tenere presente quanto segue:

* La rimozione di una connessione non elimina gli elementi già copiati tra le griglie.  Ad esempio, gli utenti, i gruppi e gli oggetti tenant presenti su entrambe le griglie non vengono eliminati da nessuna delle due griglie quando viene rimossa l'autorizzazione del tenant.  Se si desidera eliminare questi elementi, è necessario eliminarli manualmente da entrambe le griglie.
* Quando si rimuove una connessione, la replica di tutti gli oggetti in attesa di replicazione (ingeriti ma non ancora replicati nell'altra griglia) non riuscirà più.




=== Disabilita la replica per tutti i bucket tenant

.Passi
. Partendo da una delle due griglie, accedi a Grid Manager dal nodo di amministrazione principale.
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Selezionare il nome della connessione per visualizzarne i dettagli.
. Nella scheda *Tenant consentiti*, determinare se la connessione è utilizzata da qualche tenant.
. Se sono elencati degli inquilini, istruire tutti gli inquilini alink:../tenant/grid-federation-manage-cross-grid-replication.html["disabilitare la replicazione tra griglie"] per tutti i loro bucket su entrambe le griglie nella connessione.
+

TIP: Non è possibile rimuovere l'autorizzazione *Usa connessione federazione griglia* se in uno qualsiasi dei bucket tenant è abilitata la replica tra griglie.  Ogni account tenant deve disabilitare la replica tra griglie per i propri bucket su entrambe le griglie.





=== Rimuovi l'autorizzazione per ogni tenant

Dopo aver disabilitato la replica tra griglie per tutti i bucket tenant, rimuovere l'autorizzazione *Usa federazione griglie* da tutti i tenant su entrambe le griglie.

.Passi
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Selezionare il nome della connessione per visualizzarne i dettagli.
. Per ogni tenant nella scheda *Tenant consentiti*, rimuovere l'autorizzazione *Usa connessione federazione griglia* da ciascun tenant. Vedere link:grid-federation-manage-tenants.html["Gestire gli inquilini autorizzati"] .
. Ripetere questi passaggi per gli inquilini autorizzati sull'altra griglia.




=== Rimuovi connessione

.Passi
. Se nessun tenant su nessuna delle due griglie utilizza la connessione, selezionare *Rimuovi*.
. Rivedi il messaggio di conferma e seleziona *Rimuovi*.
+
** Se la connessione può essere rimossa, viene visualizzato un messaggio di conferma.  La connessione della federazione di rete è ora rimossa da entrambe le reti.
** Se la connessione non può essere rimossa (ad esempio perché è ancora in uso o si è verificato un errore di connessione), viene visualizzato un messaggio di errore.  Puoi procedere in uno dei seguenti modi:
+
*** Risolvi l'errore (consigliato). Vedere link:grid-federation-troubleshoot.html["Risolvere gli errori di federazione della griglia"] .
*** Rimuovere la connessione con la forza.  Vedere la sezione successiva.








== [[force-remove_grid_fed_connection]]Rimuovere forzatamente una connessione di federazione di griglia

Se necessario, è possibile forzare la rimozione di una connessione che non ha lo stato *Connesso*.

La rimozione forzata elimina solo la connessione dalla rete locale.  Per rimuovere completamente la connessione, eseguire gli stessi passaggi su entrambe le griglie.

.Passi
. Nella finestra di dialogo di conferma, seleziona *Forza rimozione*.
+
Viene visualizzato un messaggio di successo.  Questa connessione di federazione di rete non può più essere utilizzata.  Tuttavia, nei bucket tenant potrebbe essere ancora abilitata la replica tra griglie e alcune copie degli oggetti potrebbero essere già state replicate tra le griglie nella connessione.

. Dall'altra griglia nella connessione, accedi a Grid Manager dal nodo di amministrazione principale.
. Selezionare *CONFIGURAZIONE* > *Sistema* > *Federazione di griglia*.
. Selezionare il nome della connessione per visualizzarne i dettagli.
. Selezionare *Rimuovi* e *Sì*.
. Selezionare *Forza rimozione* per rimuovere la connessione da questa griglia.

