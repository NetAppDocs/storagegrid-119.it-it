---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords: what is information lifecycle rule, ilm rule 
summary: 'Per gestire gli oggetti, è necessario creare un set di regole di gestione del ciclo di vita delle informazioni \(ILM\) e organizzarle in una policy ILM.' 
---
= Utilizzare le regole ILM per gestire gli oggetti
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Per gestire gli oggetti, è necessario creare un set di regole di gestione del ciclo di vita delle informazioni (ILM) e organizzarle in una policy ILM.

Ogni oggetto inserito nel sistema viene valutato in base alla policy attiva.  Quando una regola nella policy corrisponde ai metadati di un oggetto, le istruzioni nella regola determinano quali azioni intraprende StorageGRID per copiare e archiviare quell'oggetto.


NOTE: I metadati degli oggetti non sono gestiti dalle regole ILM.  I metadati degli oggetti vengono invece archiviati in un database Cassandra, in quello che è noto come archivio di metadati.  In ogni sito vengono conservate automaticamente tre copie dei metadati degli oggetti per proteggere i dati da eventuali perdite.



== Elementi di una regola ILM

Una regola ILM è composta da tre elementi:

* *Criteri di filtraggio*: i filtri di base e avanzati di una regola definiscono a quali oggetti si applica la regola.  Se un oggetto corrisponde a tutti i filtri, StorageGRID applica la regola e crea le copie dell'oggetto specificate nelle istruzioni di posizionamento della regola.
* *Istruzioni di posizionamento*: le istruzioni di posizionamento di una regola definiscono il numero, il tipo e la posizione delle copie dell'oggetto.  Ogni regola può includere una sequenza di istruzioni di posizionamento per modificare nel tempo il numero, il tipo e la posizione delle copie dell'oggetto.  Quando scade il periodo di tempo per un tirocinio, le istruzioni del tirocinio successivo vengono applicate automaticamente dalla successiva valutazione ILM.
* *Comportamento di acquisizione*: il comportamento di acquisizione di una regola consente di scegliere in che modo gli oggetti filtrati dalla regola vengono protetti durante l'acquisizione (quando un client S3 salva un oggetto nella griglia).




== Filtraggio delle regole ILM

Quando si crea una regola ILM, si specificano i filtri per identificare gli oggetti a cui si applica la regola.

Nel caso più semplice, una regola potrebbe non utilizzare alcun filtro.  Qualsiasi regola che non utilizza filtri si applica a tutti gli oggetti, quindi deve essere l'ultima regola (predefinita) in un criterio ILM.  La regola predefinita fornisce istruzioni di archiviazione per gli oggetti che non corrispondono ai filtri di un'altra regola.

* I filtri di base consentono di applicare regole diverse a gruppi di oggetti ampi e distinti.  Questi filtri consentono di applicare una regola a specifici account tenant, a specifici bucket S3 o a entrambi.
+
I filtri di base offrono un modo semplice per applicare regole diverse a un gran numero di oggetti.  Ad esempio, potrebbe essere necessario archiviare i registri finanziari della tua azienda per soddisfare i requisiti normativi, mentre i dati del reparto marketing potrebbero dover essere archiviati per facilitare le operazioni quotidiane.  Dopo aver creato account tenant separati per ciascun reparto o dopo aver suddiviso i dati dei diversi reparti in bucket S3 separati, è possibile creare facilmente una regola che si applica a tutti i record finanziari e una seconda regola che si applica a tutti i dati di marketing.

* I filtri avanzati ti offrono un controllo granulare.  È possibile creare filtri per selezionare gli oggetti in base alle seguenti proprietà:
+
** Tempo di ingestione
** Ultimo orario di accesso
** Tutto o parte del nome dell'oggetto (Chiave)
** Vincolo di posizione (solo S3)
** Dimensione dell'oggetto
** Metadati utente
** Tag oggetto (solo S3)




È possibile filtrare gli oggetti in base a criteri molto specifici.  Ad esempio, gli oggetti archiviati dal reparto di diagnostica per immagini di un ospedale potrebbero essere utilizzati frequentemente quando hanno meno di 30 giorni e raramente in seguito, mentre gli oggetti che contengono informazioni sulle visite dei pazienti potrebbero dover essere copiati nel reparto di fatturazione presso la sede centrale della rete sanitaria.  È possibile creare filtri che identificano ogni tipo di oggetto in base al nome dell'oggetto, alle dimensioni, ai tag dell'oggetto S3 o a qualsiasi altro criterio rilevante, quindi creare regole separate per archiviare in modo appropriato ogni set di oggetti.

È possibile combinare i filtri in base alle proprie esigenze in un'unica regola.  Ad esempio, il reparto marketing potrebbe voler archiviare file di immagini di grandi dimensioni in modo diverso rispetto ai record dei fornitori, mentre il reparto delle risorse umane potrebbe dover archiviare i record del personale in una specifica area geografica e le informazioni sulle politiche in modo centralizzato.  In questo caso è possibile creare regole che filtrano in base all'account del tenant per separare i record da ciascun reparto, utilizzando al contempo filtri in ogni regola per identificare il tipo specifico di oggetti a cui si applica la regola.



== Istruzioni per il posizionamento delle regole ILM

Le istruzioni di posizionamento determinano dove, quando e come vengono archiviati i dati degli oggetti.  Una regola ILM può includere una o più istruzioni di posizionamento.  Ogni istruzione di posizionamento si applica a un singolo periodo di tempo.

Quando si creano istruzioni di posizionamento:

* Si inizia specificando l'ora di riferimento, che determina quando iniziano le istruzioni di posizionamento.  Il momento di riferimento potrebbe essere il momento in cui un oggetto viene acquisito, quando si accede a un oggetto, quando un oggetto con versione diventa non corrente o un momento definito dall'utente.
* Successivamente, si specifica quando verrà applicato il posizionamento, in relazione all'orario di riferimento.  Ad esempio, un posizionamento potrebbe iniziare il giorno 0 e continuare per 365 giorni, in relazione al momento in cui l'oggetto è stato acquisito.
* Infine, si specifica il tipo di copie (codifica di replicazione o di cancellazione) e la posizione in cui vengono archiviate le copie.  Ad esempio, potresti voler archiviare due copie replicate in due siti diversi.


Ogni regola può definire più posizionamenti per un singolo periodo di tempo e posizionamenti diversi per periodi di tempo diversi.

* Per posizionare oggetti in più posizioni durante un singolo periodo di tempo, seleziona *Aggiungi altro tipo o posizione* per aggiungere più di una riga per quel periodo di tempo.
* Per posizionare oggetti in posizioni diverse in periodi di tempo diversi, seleziona *Aggiungi un altro periodo di tempo* per aggiungere il periodo di tempo successivo.  Quindi, specificare una o più righe all'interno del periodo di tempo.


L'esempio mostra due istruzioni di posizionamento nella pagina Definisci posizionamenti della procedura guidata Crea regola ILM.

image::../media/ilm_rule_multiple_placements_in_single_time_period.png[Schermata di posizionamento ILM da Grid Manager]

Le prime istruzioni di posizionamentoimage:../media/icon_number_1.png["Icona numero 1"] ha due linee per il primo anno:

* La prima riga crea due copie replicate dell'oggetto in due siti di data center.
* La seconda riga crea una copia con codice di cancellazione 6+3 utilizzando tutti i siti del data center.


La seconda istruzione di posizionamentoimage:../media/icon_number_2.png["Icona numero 1"] ne crea due copie dopo un anno e le conserva per sempre.

Quando si definisce il set di istruzioni di posizionamento per una regola, è necessario assicurarsi che almeno un'istruzione di posizionamento inizi al giorno 0, che non vi siano intervalli tra i periodi di tempo definiti e che l'istruzione di posizionamento finale continui per sempre o finché non saranno più necessarie copie dell'oggetto.

Alla scadenza di ogni periodo di tempo previsto dalla regola, vengono applicate le istruzioni di posizionamento dei contenuti per il periodo di tempo successivo.  Vengono create nuove copie dell'oggetto e quelle non necessarie vengono eliminate.



== Comportamento di acquisizione delle regole ILM

Il comportamento di acquisizione controlla se le copie degli oggetti vengono posizionate immediatamente in base alle istruzioni della regola oppure se vengono create copie provvisorie e le istruzioni di posizionamento vengono applicate in un secondo momento.  Per le regole ILM sono disponibili i seguenti comportamenti di acquisizione:

* *Bilanciato*: StorageGRID tenta di effettuare tutte le copie specificate nella regola ILM al momento dell'acquisizione; se ciò non è possibile, vengono effettuate copie provvisorie e il client riceve un messaggio di conferma dell'operazione riuscita.  Quando possibile, vengono effettuate le copie specificate nella norma ILM.
* *Rigoroso*: tutte le copie specificate nella regola ILM devono essere eseguite prima che il risultato positivo venga restituito al client.
* *Doppio commit*: StorageGRID crea immediatamente copie provvisorie dell'oggetto e restituisce il risultato positivo al client.  Quando possibile, vengono effettuate le copie specificate nella norma ILM.


.Informazioni correlate
* link:data-protection-options-for-ingest.html["Opzioni di acquisizione"]
* link:advantages-disadvantages-of-ingest-options.html["Vantaggi, svantaggi e limitazioni delle opzioni di ingestione"]
* link:../s3/consistency-controls.html#how-consistency-controls-and-ILM-rules-interact["Come la coerenza e le regole ILM interagiscono per influenzare la protezione dei dati"]




== Esempio di regola ILM

Ad esempio, una regola ILM potrebbe specificare quanto segue:

* Si applica solo agli oggetti appartenenti all'inquilino A.
* Realizza due copie replicate di quegli oggetti e conserva ciascuna copia in un luogo diverso.
* Conservare le due copie "per sempre", il che significa che StorageGRID non le eliminerà automaticamente.  StorageGRID conserverà invece questi oggetti finché non verranno eliminati da una richiesta di eliminazione del client o dalla scadenza del ciclo di vita di un bucket.
* Utilizzare l'opzione Bilanciato per il comportamento di acquisizione: l'istruzione di posizionamento su due siti viene applicata non appena il Tenant A salva un oggetto in StorageGRID, a meno che non sia possibile effettuare immediatamente entrambe le copie richieste.
+
Ad esempio, se il sito 2 non è raggiungibile quando il tenant A salva un oggetto, StorageGRID eseguirà due copie provvisorie sui nodi di archiviazione del sito 1.  Non appena il Sito 2 sarà disponibile, StorageGRID effettuerà la copia richiesta in quel sito.



.Informazioni correlate
* link:what-storage-pool-is.html["Che cos'è un pool di archiviazione"]
* link:what-cloud-storage-pool-is.html["Che cos'è un Cloud Storage Pool"]

